# 📋 BookCraft Vercel 배포 할 일 목록 (2025.08.30)

> Vercel 배포 가이드 2번~5번 단계별 상세 작업 목록

## 🎯 전체 진행 상황

- [x] **1단계**: Vercel 계정 연결 ✅
- [ ] **2단계**: 환경 변수 설정 🔄
- [ ] **3단계**: 데이터베이스 설정 🔄
- [ ] **4단계**: Firebase 설정 🔄
- [ ] **5단계**: 배포 과정 🔄

---

## 📋 2단계: 환경 변수 설정

### 🔧 Vercel 대시보드 환경 변수 설정

#### 필수 환경 변수 (반드시 설정)

- [ ] **DATABASE_URL**
  - 값: `postgresql://username:password@host:port/database`
  - 설명: PostgreSQL 데이터베이스 연결 문자열
  - 주의사항: Vercel Postgres 생성 후 자동 생성되는 값 사용

- [ ] **JWT_SECRET**
  - 값: `your-super-secret-jwt-key-change-in-production`
  - 설명: JWT 토큰 암호화 키
  - 주의사항: 최소 32자 이상의 랜덤 문자열 사용

- [ ] **JWT_EXPIRES_IN**
  - 값: `7d`
  - 설명: JWT 토큰 만료 시간

#### Firebase 인증 환경 변수

- [ ] **NEXT_PUBLIC_FIREBASE_API_KEY**
  - 값: Firebase 프로젝트 설정에서 복사
  - 설명: Firebase 웹 API 키

- [ ] **NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN**
  - 값: `your_project.firebaseapp.com`
  - 설명: Firebase 인증 도메인

- [ ] **NEXT_PUBLIC_FIREBASE_PROJECT_ID**
  - 값: Firebase 프로젝트 ID
  - 설명: Firebase 프로젝트 식별자

- [ ] **NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET**
  - 값: `your_project.appspot.com`
  - 설명: Firebase 스토리지 버킷

- [ ] **NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID**
  - 값: Firebase 메시징 발신자 ID
  - 설명: FCM 메시징용 발신자 ID

- [ ] **NEXT_PUBLIC_FIREBASE_APP_ID**
  - 값: Firebase 앱 ID
  - 설명: Firebase 앱 식별자

#### Firebase Admin (서버사이드) 환경 변수

- [ ] **FIREBASE_ADMIN_PROJECT_ID**
  - 값: Firebase 프로젝트 ID (위와 동일)
  - 설명: Firebase Admin SDK용 프로젝트 ID

- [ ] **FIREBASE_ADMIN_CLIENT_EMAIL**
  - 값: 서비스 계정 이메일
  - 설명: Firebase Admin SDK 서비스 계정 이메일

- [ ] **FIREBASE_ADMIN_PRIVATE_KEY**
  - 값: 서비스 계정 개인 키
  - 설명: Firebase Admin SDK 개인 키
  - 주의사항: 개행 문자(\n)를 실제 개행으로 변환 필요

#### 기타 필수 환경 변수

- [ ] **CRON_API_KEY**
  - 값: `your_cron_security_key`
  - 설명: Cron Job 보안 키
  - 주의사항: 랜덤 문자열 생성하여 사용

- [ ] **NEXT_PUBLIC_APP_URL**
  - 값: `https://your-app.vercel.app`
  - 설명: 배포된 앱의 URL
  - 주의사항: 배포 후 실제 도메인으로 업데이트

#### 선택적 환경 변수 (기능 사용 시 설정)

- [ ] **OPENAI_API_KEY** (AI 기능 사용 시)
  - 값: OpenAI API 키
  - 설명: AI 기반 퀘스트 생성용

- [ ] **NEXT_PUBLIC_PUSHER_APP_ID** (실시간 기능 사용 시)
  - 값: Pusher 앱 ID
  - 설명: 실시간 알림용

- [ ] **NEXT_PUBLIC_PUSHER_KEY**
  - 값: Pusher 키
  - 설명: 클라이언트 사이드 Pusher 키

- [ ] **PUSHER_SECRET**
  - 값: Pusher 시크릿
  - 설명: 서버 사이드 Pusher 시크릿

- [ ] **NEXT_PUBLIC_PUSHER_CLUSTER**
  - 값: Pusher 클러스터 (예: ap3)
  - 설명: Pusher 서버 클러스터

### ✅ 환경 변수 설정 완료 체크리스트

- [ ] Vercel 대시보드 → 프로젝트 → Settings → Environment Variables 접속
- [ ] 모든 필수 환경 변수 입력 완료
- [ ] 환경 변수 값에 따옴표 없이 입력 확인
- [ ] Production, Preview, Development 환경 모두 체크
- [ ] 설정 저장 및 재배포 트리거

---

## 🗄️ 3단계: 데이터베이스 설정

### 옵션 A: Vercel Postgres (권장)

#### Vercel Postgres 생성

- [ ] **Vercel 대시보드 접속**
  - Vercel 대시보드 → Storage 탭 이동

- [ ] **데이터베이스 생성**
  - "Create Database" 클릭
  - "Postgres" 선택
  - 데이터베이스 이름 입력 (예: bookcraft-db)
  - 리전 선택 (가까운 지역 선택)

- [ ] **연결 정보 확인**
  - 생성 완료 후 연결 정보 복사
  - DATABASE_URL 자동 생성 확인
  - 환경 변수에 자동 추가 확인

#### 스키마 생성

- [ ] **스키마 파일 준비**
  - `supabase/schema.sql` 파일 내용 복사
  - 필요시 Vercel Postgres 문법에 맞게 수정

- [ ] **스키마 실행 방법 1: Vercel 대시보드**
  - Vercel Postgres → Query 탭
  - 스키마 SQL 붙여넣기 및 실행

- [ ] **스키마 실행 방법 2: 로컬에서 연결**
  ```bash
  # psql 설치 (macOS)
  brew install postgresql
  
  # 스키마 실행
  psql "DATABASE_URL" -f supabase/schema.sql
  ```

- [ ] **테이블 생성 확인**
  - users, families, books, quests 등 주요 테이블 생성 확인
  - pending_invites 테이블 생성 확인

### 옵션 B: 외부 데이터베이스

#### Supabase 사용

- [ ] **Supabase 프로젝트 생성**
  - supabase.com 접속 및 회원가입
  - 새 프로젝트 생성
  - 리전 선택 및 데이터베이스 비밀번호 설정

- [ ] **연결 정보 복사**
  - Settings → Database → Connection string 복사
  - Vercel 환경 변수 DATABASE_URL에 설정

- [ ] **스키마 적용**
  - Supabase SQL Editor에서 schema.sql 실행
  - 또는 로컬에서 psql로 연결하여 실행

#### 기타 외부 DB (PlanetScale, Railway 등)

- [ ] **서비스 선택 및 가입**
  - PlanetScale, Railway, Neon 등 중 선택
  - 무료 플랜으로 시작

- [ ] **데이터베이스 생성**
  - 각 서비스별 가이드 따라 DB 생성
  - 연결 문자열 복사

- [ ] **스키마 적용**
  - 각 서비스의 콘솔 또는 CLI 사용
  - schema.sql 파일 실행

### ✅ 데이터베이스 설정 완료 체크리스트

- [ ] 데이터베이스 생성 완료
- [ ] DATABASE_URL 환경 변수 설정 완료
- [ ] 스키마 적용 완료
- [ ] 테이블 생성 확인
- [ ] 연결 테스트 성공

---

## 🔥 4단계: Firebase 설정

### Firebase 프로젝트 생성

- [ ] **Firebase Console 접속**
  - console.firebase.google.com 접속
  - Google 계정으로 로그인

- [ ] **새 프로젝트 생성**
  - "프로젝트 추가" 클릭
  - 프로젝트 이름 입력 (예: bookcraft)
  - Google Analytics 설정 (선택사항)
  - 프로젝트 생성 완료

### Authentication 설정

- [ ] **Authentication 활성화**
  - Firebase Console → Authentication 메뉴
  - "시작하기" 클릭

- [ ] **로그인 방법 설정**
  - Sign-in method 탭 클릭
  - "이메일/비밀번호" 활성화
  - "Google" 활성화 (선택사항)
  - 기타 필요한 로그인 방법 활성화

- [ ] **승인된 도메인 추가**
  - Authentication → Settings → Authorized domains
  - Vercel 도메인 추가 (예: your-app.vercel.app)
  - 로컬 개발용 localhost:3000 확인

### 웹 앱 등록

- [ ] **웹 앱 추가**
  - 프로젝트 설정 → 일반 탭
  - "앱 추가" → 웹 아이콘 클릭
  - 앱 닉네임 입력 (예: BookCraft Web)
  - Firebase Hosting 설정 건너뛰기

- [ ] **설정 정보 복사**
  - Firebase SDK 설정 정보 복사
  - 다음 정보들을 Vercel 환경 변수에 설정:
    - apiKey → NEXT_PUBLIC_FIREBASE_API_KEY
    - authDomain → NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN
    - projectId → NEXT_PUBLIC_FIREBASE_PROJECT_ID
    - storageBucket → NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    - messagingSenderId → NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    - appId → NEXT_PUBLIC_FIREBASE_APP_ID

### Firebase Admin SDK 설정

- [ ] **서비스 계정 생성**
  - 프로젝트 설정 → 서비스 계정 탭
  - "새 비공개 키 생성" 클릭
  - JSON 파일 다운로드

- [ ] **서비스 계정 정보 추출**
  - 다운로드한 JSON 파일에서 다음 정보 복사:
    - project_id → FIREBASE_ADMIN_PROJECT_ID
    - client_email → FIREBASE_ADMIN_CLIENT_EMAIL
    - private_key → FIREBASE_ADMIN_PRIVATE_KEY

- [ ] **개인 키 형식 변환**
  - private_key의 \n을 실제 개행 문자로 변환
  - Vercel 환경 변수에 설정 시 따옴표 없이 입력

### Firebase 보안 규칙 설정 (선택사항)

- [ ] **Firestore 규칙 설정** (Firestore 사용 시)
  - Firestore Database → 규칙 탭
  - 적절한 보안 규칙 설정

- [ ] **Storage 규칙 설정** (Storage 사용 시)
  - Storage → 규칙 탭
  - 파일 업로드 권한 설정

### ✅ Firebase 설정 완료 체크리스트

- [ ] Firebase 프로젝트 생성 완료
- [ ] Authentication 활성화 및 로그인 방법 설정
- [ ] 승인된 도메인에 Vercel 도메인 추가
- [ ] 웹 앱 등록 및 설정 정보 복사
- [ ] 서비스 계정 생성 및 키 다운로드
- [ ] 모든 Firebase 환경 변수 Vercel에 설정
- [ ] 로컬에서 Firebase 연결 테스트

---

## 🚀 5단계: 배포 과정

### 방법 A: GitHub 연동 배포 (권장)

#### GitHub 저장소 준비

- [ ] **GitHub 저장소 생성**
  - github.com에서 새 저장소 생성
  - 저장소 이름: bookcraft (또는 원하는 이름)
  - Public 또는 Private 선택

- [ ] **로컬 코드 푸시**
  ```bash
  # 원격 저장소 추가
  git remote add origin https://github.com/username/bookcraft.git
  
  # 코드 푸시
  git push -u origin main
  ```

#### Vercel에서 GitHub 연결

- [ ] **Vercel 대시보드 접속**
  - vercel.com 로그인
  - "New Project" 클릭

- [ ] **GitHub 저장소 연결**
  - "Import Git Repository" 선택
  - GitHub 계정 연결 (필요시)
  - bookcraft 저장소 선택
  - "Import" 클릭

- [ ] **프로젝트 설정**
  - Project Name: bookcraft
  - Framework Preset: Next.js
  - Root Directory: ./ (기본값)
  - Build Command: npm run build (기본값)
  - Output Directory: .next (기본값)

#### 환경 변수 설정

- [ ] **환경 변수 추가**
  - "Environment Variables" 섹션에서
  - 2단계에서 준비한 모든 환경 변수 입력
  - Production, Preview, Development 모두 체크

- [ ] **배포 시작**
  - "Deploy" 클릭
  - 첫 배포 시작 및 진행 상황 모니터링

### 방법 B: Vercel CLI 배포

#### CLI 설치 및 설정

- [ ] **Vercel CLI 설치**
  ```bash
  npm install -g vercel
  ```

- [ ] **Vercel 로그인**
  ```bash
  vercel login
  ```
  - 이메일 입력 또는 GitHub 연동

#### 프로젝트 설정

- [ ] **프로젝트 초기화**
  ```bash
  # 프로젝트 루트에서 실행
  vercel
  ```
  - 프로젝트 설정 질문에 답변
  - 팀 선택 (개인 계정 또는 팀)
  - 프로젝트 이름 설정

- [ ] **환경 변수 설정**
  ```bash
  # 각 환경 변수 개별 설정
  vercel env add DATABASE_URL
  vercel env add JWT_SECRET
  # ... 기타 환경 변수들
  ```

#### 배포 실행

- [ ] **프리뷰 배포**
  ```bash
  vercel
  ```
  - 개발/테스트용 배포
  - 미리보기 URL 생성

- [ ] **프로덕션 배포**
  ```bash
  vercel --prod
  ```
  - 실제 서비스용 배포
  - 프로덕션 도메인에 배포

### 배포 후 확인 작업

#### 기본 기능 테스트

- [ ] **메인 페이지 접속**
  - 배포된 URL로 접속
  - 페이지 정상 로드 확인
  - 레이아웃 및 스타일 확인

- [ ] **회원가입 테스트**
  - 새 계정 생성
  - 이메일 인증 확인
  - Firebase Authentication 연동 확인

- [ ] **로그인 테스트**
  - 생성한 계정으로 로그인
  - JWT 토큰 생성 확인
  - 대시보드 접근 확인

#### 데이터베이스 연결 확인

- [ ] **API 엔드포인트 테스트**
  - /api/auth/verify 호출
  - /api/users/stats 호출
  - 데이터베이스 쿼리 정상 실행 확인

- [ ] **데이터 생성 테스트**
  - 책 등록 기능 테스트
  - 퀘스트 생성 확인
  - 데이터베이스에 정상 저장 확인

#### 고급 기능 테스트

- [ ] **가족 시스템 테스트**
  - 가족 생성 기능
  - 초대 코드 생성
  - 가족 참여 기능

- [ ] **퀘스트 시스템 테스트**
  - 일일 퀘스트 생성
  - 퀘스트 완료 처리
  - 보상 지급 확인

- [ ] **Cron Job 테스트**
  - /api/quests/expire 엔드포인트 호출
  - 스케줄링 작동 확인

### 성능 및 모니터링

- [ ] **성능 확인**
  - 페이지 로드 속도 측정
  - Lighthouse 점수 확인
  - Core Web Vitals 확인

- [ ] **오류 모니터링 설정**
  - Vercel Analytics 활성화
  - 오류 로그 확인
  - 알림 설정

- [ ] **도메인 설정** (선택사항)
  - 커스텀 도메인 연결
  - SSL 인증서 확인
  - DNS 설정

### ✅ 배포 완료 체크리스트

- [ ] GitHub 저장소 생성 및 코드 푸시
- [ ] Vercel 프로젝트 생성 및 연결
- [ ] 모든 환경 변수 설정 완료
- [ ] 첫 배포 성공
- [ ] 메인 페이지 정상 접속
- [ ] 회원가입/로그인 기능 정상 작동
- [ ] 데이터베이스 연결 및 API 정상 작동
- [ ] 주요 기능들 정상 작동 확인
- [ ] 성능 및 모니터링 설정 완료

---

## 🎉 최종 완료 확인

### 전체 시스템 점검

- [ ] **사용자 플로우 테스트**
  1. 회원가입 → 로그인
  2. 프로필 설정
  3. 책 등록
  4. 퀘스트 완료
  5. 가족 생성/참여
  6. 독서 세션 기록

- [ ] **관리자 기능 확인**
  - Cron Job 스케줄링
  - 데이터베이스 백업
  - 로그 모니터링
  - 성능 지표 확인

- [ ] **문서 업데이트**
  - README.md 배포 URL 업데이트
  - 환경 변수 가이드 최신화
  - 사용자 매뉴얼 업데이트

### 🚀 BookCraft 배포 완료!

모든 단계를 완료하면 BookCraft가 Vercel에서 안정적으로 운영됩니다.

**배포 완료 후 할 일:**
- 사용자 피드백 수집
- 성능 모니터링
- 정기적인 업데이트
- 백업 및 보안 점검

---

*작성일: 2025년 8월 30일*  
*작성자: BookCraft 개발팀*  
*문서 버전: 1.0*